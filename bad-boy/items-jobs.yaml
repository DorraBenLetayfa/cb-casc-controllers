removeStrategy:
  rbac: SYNC
  items: NONE

items:
  - kind: pipeline
    name: pipeline-dummy-1-builtIn
    concurrentBuild: true
    definition:
      cpsFlowDefinition:
        sandbox: true
        script: |+
          node("built-in") {
              stage('beginning') {
                sh 'sleep 30'
                sh 'date > date.txt'
                stash name: 'stuff', includes: 'date.txt'
              }
              checkpoint 'middle'
          }
          stage('beginning') {
              stage('end') {
                unstash 'stuff'
                sh 'cat date.txt'
                sh 'sleep 2m'
              }
          }
    description: ''
    disabled: false
    displayName: pipeline-dummy-1-builtIn
    properties:
    - pipelineTriggers:
        triggers:
        - cron:
            spec: H/15 * * * *
    resumeBlocked: false

  - kind: pipeline
    name: pipeline-mockLoad-builtIn
    concurrentBuild: true
    definition:
      cpsFlowDefinition:
        sandbox: true
        script: |+
          parallel([0, 1].collectEntries {b -> ["branch-$b", {
          node("built-in") {
              stage('prep') {
                    sh 'curl https://ipinfo.io/'
                }
              stage('build') {
                mockLoad 180
              }
              checkpoint 'middle'
          }
          node("built-in") {
              stage('publish') {
                archiveArtifacts allowEmptyArchive: true, artifacts: 'mock-artifact-*.txt'
                fingerprint 'mock-artifact-*.txt'
                junit 'mock-junit.xml'
              }
          }
          }]})

    description: ''
    disabled: false
    displayName: pipeline-mockLoad-builtIn
    properties:
    - pipelineTriggers:
        triggers:
        - cron:
            spec: H/30 * * * *
    resumeBlocked: false
